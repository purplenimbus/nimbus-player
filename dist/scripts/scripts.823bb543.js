"use strict";angular.module("nimbusPlayerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/player.html"}).otherwise({redirectTo:"/"})}]).run(["$http","genius",function(a,b){a.defaults.headers.common.Authorization="Bearer "+b.token}]),angular.module("nimbusPlayerApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("nimbusPlayerApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("nimbusPlayerApp").controller("PlayerCtrl",["$scope","wave","music","waveForm","genius","artist","$window",function(a,b,c,d,e,f,g){a.loggedin=!1,a.player={currentSong:0,currentTime:0,playlist:c.songs},a.prevSong=function(){a.player.wave.stop(),console.log("Playing?",a.playing),a.playing&&a.stopSong(),a.player.currentSong-=1,a.playSong(a.player.currentSong)},a.nextSong=function(){a.player.wave.stop(),console.log("Playing?",a.playing),a.playing&&a.stopSong(),a.player.currentSong+=1,a.playSong(a.player.currentSong)},a.playSong=function(b){console.log("index",b),a.playing?b===a.player.currentSong?(console.log("same song playing paused!"),a.pauseSong()):(console.log("diffrent song playing stopped!"),a.stopSong(),a.player.songs[b].howler.play(),a.player.currentSong=b,a.playing=!0,a.player.wave.start()):(a.player.songs[b].howler.play(),a.player.currentSong=b,a.player.wave.start())},a.stopSong=function(){console.log("pauseSong"),a.playing=!1,a.player.songs[a.player.currentSong].howler.stop(),a.player.currentTime=0,a.player.wave.stop()},a.pauseSong=function(){console.log("pauseSong"),a.playing=!1,a.player.songs[a.player.currentSong].howler.pause(),a.player.wave.stop()},a.playerInit=function(){a.playing=!1,a.player={},a.player.songs=c.initHowl(c.songs,a),a.player.wave=b.initWave(a),a.player.currentSong=0,a.offCanvas=g.UIkit.offcanvas("#off-canvas"),angular.element("#off-canvas").on("hidden",function(){a.resetOffCanvas()}),console.log("Songs",a)},a.resetOffCanvas=function(){a.playlist=!1,a.offCanvas.description=!1,a.offCanvas.title=!1,a.offCanvas.profile=!1,a.offCanvas.search=!1,console.log("offcanvas reset")},a.getInfo=function(b,c){a.offCanvas.show();var d=f.getInfo(b,c,a);a.offCanvas.title=c,200===d.status?a.offCanvas.description=d.data:a.offCanvas.description="no information found"},a.showPlaylist=function(){console.log("show playlist",a),a.offCanvas.show(),a.offCanvas.title=name,a.playlist=!0},a.showProfile=function(){console.log("show profile",a),a.offCanvas.show(),a.offCanvas.title=a.loggedin?"account":"login",a.offCanvas.profile=!0},a.showSearch=function(b){console.log("show search , term:",b),a.offCanvas.show(),a.offCanvas.title="Search",a.offCanvas.search=!0},a.login=function(a){console.log("login data",a)},a.playerInit()}]),angular.module("nimbusPlayerApp").service("wave",["$window",function(a){this.initWave=function(){return console.log("wave init",angular.element("#player-wave").get(0)),new a.SiriWave({container:angular.element("#player-wave").get(0),width:640,height:200,style:"default",cover:!0,speed:.03,amplitude:.7,frequency:2})}}]),angular.module("nimbusPlayerApp").service("music",["waveForm","$window",function(a,b){this.songArray=[],this.songs=[{name:"bodak yellow",artist:{id:99,name:"Cardi B"},image:"https://images.genius.com/91c42ffe08c769e12a269041ac5b9e9d.960x960x1.jpg",url:"http://s4.faz-sv.in/mr-reese/top/august2017/Hot%20100%20Billboard%20Singles%20Chart%20-%2013%20August%202017%20-%20MP3%20320/28.%20Cardi%20B%20-%20Bodak%20Yellow.mp3",album:{id:45,type:"album",name:"cb1"},features:[],producer:[{id:12,name:"j. white did it"}]},{name:"feel me",artist:{id:35,name:"tyga"},image:"https://images.genius.com/95d582049a3bf226ca95b7155f6b56c3.700x700x1.jpg",url:"http://purplinx.org/djuhqvxhwtgn/play.mp3",album:{id:25,type:"album",name:"bitch im the shit 2"},features:[{id:21,name:"kanye west"}],producer:[{id:21,name:"kanye west"},{id:27,name:"sound MOB"}]},{name:"Skateboard P (Remix)",artist:{id:29,name:"MadeinTYO"},image:"https://sslf.ulximg.com/image/355x355/cover/1478305765_0a1255c31fc98be00f8d17c18abc49f6.jpg/3b750aa78a0329b926c5027a6fd55920/1478305765_909ea89daaf79bea8f8493230338a8b3.jpg",url:"http://70clacks.co/wp-content/uploads/2016/11/MADEINTYO-SKATEBOARD-P-REMIX-FT.-BIG-SEAN_9ZwXMWzBN34_youtube.mp3",album:{id:15,type:"mixtape",name:"untitled"},features:[{id:20,name:"big sean"}],producer:[{id:60,name:"K Swisha"}]},{name:"bounce back",artist:{id:20,name:"big sean"},image:"http://fuxwithit.com/wp-content/uploads/2016/10/Take-No-Ls.png",url:"http://purplinx.org/htevstv3sjsy/play.mp3",album:{id:15,type:"mixtape",name:"take no ls"},features:[]},{name:"RAF",artist:{id:1,name:"A$AP Mob"},image:"http://images.genius.com/f3becefe1f0fd4be1d9e838af51bc59d.1000x1000x1.jpg",url:"http://gidiclick.com/download/ASAP_Rocky_-_RAF_Ft_Frank_Ocean_Lil_Uzi_Vert_Quavo_Official_Version_Gidiclick.com_.mp3.mp3",album:{id:1,type:"mixtape",name:"the cozy tapes vol 2: too cozy"},features:[{id:3,name:"quavo"},{id:4,name:"lil uzi vert"},{id:5,name:"playboi carti"},{id:6,name:"frank ocean"}],producer:[{id:69,name:"dun deal"}]},{name:"in da club",artist:{name:"50 Cent"},image:"http://upload.wikimedia.org/wikipedia/en/9/9d/Get_Rich_Or_Die_Tryin'.JPG",url:"http://tecmax0ne.free.fr/mp3/Starfloor%20Anthologie%20-%203cd%20-%20By%20SkunK357/Starfloor%20Anthologie%20-%20By%20SkunK/Cd3/08%20-%2050Cent%20-%20In%20Da%20Club.mp3",album:{id:2,type:"album",name:"get rich or die trying"}}],this.howl=[],this.initHowl=function(c,d){return console.log("initHowl!",c),c.map(function(c){var e=new b.Howl({src:c.url,html5:!0,onseek:function(a){console.log("seeked!",a)},onend:function(){console.log("Finished!"),d.nextSong(),d.playing=!1,d.$apply()},onplay:function(){console.log("Playing!"),d.playing=!0,d.$apply()},onload:function(){console.log("Song Loaded!")},onloaderror:function(a,b){console.log("Song Load Error!",a,b)},onplayerror:function(a,b){console.log("Song Play Error!",a,b)}});c.howler=e,a.waveForm().load(c.url),c.waveForm=a.waveForm()}),c}}]),angular.module("nimbusPlayerApp").service("waveForm",["$window",function(a){this.waveForm=function(){return a.WaveSurfer.create({container:"#waveform",waveColor:"violet",progressColor:"purple"})}}]),angular.module("nimbusPlayerApp").service("artist",["$http","genius",function(a,b){this.getInfo=function(a,c){console.log("getInfo",a,c);var d=b.search(c);return console.log("getInfo search",d),!1}}]),angular.module("nimbusPlayerApp").service("genius",["$http","$sce",function(a,b){this.endpoint="https://api.genius.com/",this.token="21V219dRk6NBf24CfHNAhg8zw1A9UuNwGUSmLcSvtCjOHKVRHlH2Mp9bCN6y83tp",this.search=function(c){console.log("genius query",c);var d=!1;a.defaults.headers.common.Authorization="Bearer "+this.token;var e=this.endpoint+"search?q="+encodeURIComponent(c.toLowerCase())+"&access_token="+this.token;return b.trustAsResourceUrl(e),console.log("genius query url",e),a.get(e).then(function(a){console.log("Search result",a),d=a.data}).catch(function(a){console.log("Search error",a),d=a}),d}}]),angular.module("nimbusPlayerApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/partials/_navbar.html",'<nav class="uk-navbar-container uk-navbar-transparent" uk-navbar> <div class="uk-navbar-left"> <ul class="uk-navbar-nav uk-iconnav"> <li><a ng-click="showProfile()" uk-icon="icon: user"></a></li> </ul> </div> <div class="uk-navbar-right"> <ul class="uk-navbar-nav uk-iconnav"> <li><a ng-click="showSearch()" uk-icon="icon: search"></a></li> </ul> </div> </nav>'),a.put("views/player.html",'<div ng-controller="PlayerCtrl"> <section class="uk-height-viewport"> <div id="waveform" class="uk-hidden"></div> <div class="uk-inline player"> <div class="uk-position-top"> <div ng-include="\'views/partials/_navbar.html\'"></div> </div> <img class="background" src="{{ player.songs[player.currentSong].image }}" alt=""> <div id="player-wave"></div> <div class="uk-overlay-default uk-position-cover"> </div> <div class="uk-position-center uk-text-center uk-width-medium-1-3"> <h3 class="uk-text-bold uk-dark uk-text-lead uk-text-truncate">{{ player.songs[player.currentSong].album.name | uppercase }}</h3> <div class="uk-thumbnail uk-thumbnail-medium uk-inline song-info" ng-class="buffering ? \':hover\' : \'\'"> <img src="{{ player.songs[player.currentSong].image }}" alt=""> <div class="overlay"> <div class="uk-position-center"> <div ng-if="!playing && buffering" uk-spinner></div> <ul ng-if="!buffering" class="share uk-iconnav"> <li> <a href="" uk-icon="icon: plus" class="uk-light"></a> </li> <li> <a href="" uk-icon="icon: heart" class="uk-light"></a> </li> <li> <a href="" uk-icon="icon: forward"></a> </li> </ul> </div> </div> </div> <h3 class="uk-dark uk-text-large uk-text-truncate"> {{ player.songs[player.currentSong].name | uppercase }} </h3> <p class="uk-dark uk-text-meta uk-text-truncate"><a class="uk-text-bold" ng-click="getInfo(false,player.songs[player.currentSong].artist.name)">{{ player.songs[player.currentSong].artist.name | uppercase }}</a> <span ng-if="player.songs[player.currentSong].features.length"> feat. <span ng-repeat="feature in player.songs[player.currentSong].features"> <a class="uk-text-bold" ng-click="getInfo(false,feature.name)">{{ feature.name | uppercase}}</a> <span ng-if="player.songs[player.currentSong].features[$index + 1] && player.songs[player.currentSong].features[$index + 2]"> , </span> <span ng-if="player.songs[player.currentSong].features[$index + 1] && !player.songs[player.currentSong].features[$index + 2]"> and </span> </span> </span> <span ng-if="player.songs[player.currentSong].producer.length" class="uk-text-small uk-dark"> ( Prod. by <span ng-repeat="producer in player.songs[player.currentSong].producer"> <a class="uk-text-bold" ng-click="getInfo(false,producer.name)">{{ producer.name | uppercase}}</a> <span ng-if="player.songs[player.currentSong].producer[$index + 1] && player.songs[player.currentSong].producer[$index + 2]"> , </span> <span ng-if="player.songs[player.currentSong].producer[$index + 1] && !player.songs[player.currentSong].producer[$index + 2]"> and </span> </span> ) </span> </p> </div> <div class="uk-position-bottom uk-dark"> <div class="seeker uk-hidden"> <input class="uk-range" type="range" min="0" max="{{ player.songs[player.currentSong].howler.duration() }}" step="0.1" ng-model="player.currentTime"> </div> <div class="uk-flex uk-flex-center"> <ul class="player-controls uk-iconnav uk-dark"> <li> <a uk-icon="icon: list" ng-click="showPlaylist()"></a> </li> <li ng-if="player.songs[player.currentSong - 1]"> <a ng-click="prevSong()" href="" uk-icon="icon: chevron-left"></a> </li> <li ng-if="!playing"> <a ng-click="playSong(player.currentSong);" uk-icon="icon: play"></a> </li> <li ng-if="playing"> <a ng-click="pauseSong();" uk-icon="icon: ban"></a> </li> <li ng-if="player.songs[player.currentSong + 1]"> <a ng-click="nextSong()" uk-icon="icon: chevron-right"></a> </li> <li ng-if="false"> <a href="" uk-icon="icon: push"></a> </li> </ul> <div> </div> </div> \x3c!-- This is the off-canvas --\x3e <div id="off-canvas" uk-offcanvas="overlay: true"> <div class="uk-offcanvas-bar"> <button class="uk-offcanvas-close" type="button" uk-close></button> <h3>{{ offCanvas.title | uppercase }}</h3> <div class="uk-inline uk-width-1-1" ng-if="offCanvas.search"> <a class="uk-form-icon uk-form-icon-flip" href="" uk-icon="icon: search"></a> <input class="uk-input" ng-model="$scope.search"> </div> <div class="playlist" ng-if="playlist"> <ul class="uk-list uk-list-divider song-list"> <li class="uk-clearfix song" ng-repeat="song in player.songs"> <a class="title uk-float-left uk-dark" ng-click="playSong($index)" ng-class="player.currentSong === $index ? \'uk-text-bold active\' : \'uk-text-muted\'">{{ song.name | uppercase }} - <span class="uk-text-small">{{ song.artist.name | uppercase }}</span> </a> <ul class="uk-iconnav controls uk-float-right"> <li> <div ng-if="player.currentSong === $index && playing" id="playing" class="playing" style="display: block"> <div class="rect1"></div> <div class="rect2"></div> <div class="rect3"></div> <div class="rect4"></div> <div class="rect5"></div> </div> </li> <li ng-if="false"> <a href="" uk-icon="icon: plus-circle"></a> </li> <li ng-if="false"> <a href="" uk-icon="icon: upload"></a> </li> </ul> </li> </ul> </div> <p ng-if="offCanvas.description">{{ offCanvas.description }}</p> <ul uk-accordion ng-if="offCanvas.profile && loggedin"> <li class="uk-open"> <h3 class="uk-accordion-title">Item 1</h3> <div class="uk-accordion-content"> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p> </div> </li> <li> <h3 class="uk-accordion-title">Item 2</h3> <div class="uk-accordion-content"> <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor reprehenderit.</p> </div> </li> <li> <h3 class="uk-accordion-title">Item 3</h3> <div class="uk-accordion-content"> <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat proident.</p> </div> </li> </ul> <form ng-if="offCanvas.profile && !loggedin" class="uk-form-stacked"> <div class="uk-margin"> <div class="uk-inline uk-width-1-1"> <a class="uk-form-icon uk-form-icon-flip" href="" uk-icon="icon: user"></a> <input type="text" class="uk-input" ng-model="username"> </div> </div> <div class="uk-margin"> <div class="uk-inline uk-width-1-1"> <a class="uk-form-icon uk-form-icon-flip" href="" uk-icon="icon: lock"></a> <input type="password" class="uk-input" ng-model="password"> </div> </div> <div class="uk-margin"> <div class="uk-inline uk-width-1-1"> <button class="uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom" ng-click="login({ username:this.username , password: this.password })"><span uk-icon="icon: sign-in"></span> login</button> </div> </div> </form> </div> </div> </div> </div></section> </div>')}]);